## Set DIST_BASE dependant on QNX_PROJECT_ROOT.
#     Default aims at PWD/libxml2 (relative to calling location, not the file (unlike make))
echo "Setting up environment variables and source."
if [[ -z ${QNX_PROJECT_ROOT} ]] then
    DIST_BASE="${PWD}/libxml2"
    echo "QNX_PROJECT_ROOT not set, source set to ${DIST_BASE}"
else
    DIST_BASE=${QNX_PROJECT_ROOT}
    echo "Source set to ${DIST_BASE}"
fi

## Set up via autogen.sh
#      Test to determine if we have the correct DIST_BASE,
#      then run autogen

# Testing for autogen.sh
if test -e "${DIST_BASE}/autogen.sh"; then
    echo "autogen.sh found"
else
    echo "ERROR: autogen.sh not found. Try manually setting QNX_PROJECT_ROOT"
    exit
fi

# 
# Spawn child process & wait for resolution (prevents current directory messup)
cd ${DIST_BASE} && ./autogen.sh &
pid_child_process=$!
wait ${pid_child_process}