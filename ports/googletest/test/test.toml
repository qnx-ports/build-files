package = "googletest"
timeout = 1800
jobs = ${{nproc}}

[googletest]
path = """build/build/googlemock/*gmock*test*
    build/build/googletest/googletest*test*
    build/build/googletest/gtest*test*"""

# These tests fail --gtest_list_tests.
[[googletest.skipped]]
name = "build/build/googletest/gtest_no_test_unittest"
norun = true
[[googletest.skipped]]
name = "build/build/googletest/gtest_stress_test"
norun = true
[[googletest.skipped]]
name = "build/build/googlemock/gmock_stress_test"
norun = true
[[googletest.skipped]]
name = "build/build/googlemock/gmock_output_test_"
norun = true
[[googletest.skipped]]
name = "build/build/googletest/gtest_environment_test"
norun = true
[[googletest.skipped]]
name = "build/build/googletest/gtest_repeat_test"
norun = true
[[googletest.skipped]]
name = "build/build/googlemock/gmock-more-actions_no_exception_test"
norun = true
[[googletest.skipped]]
name = "build/build/googlemock/gmock_no_rtti_test"
norun = true
[[googletest.skipped]]
name = "build/build/googlemock/shared_gmock_test_"
norun = true
# Expected failures. These tests leak memory and expect googletest to detect the
# leak, causing a failure.
[[googletest.skipped]]
name = "build/build/googlemock/gmock_leak_test_"
[[googletest.skipped.suites]]
name = "LeakTest"
file = "googletest/googlemock/test/gmock_leak_test_.cc"
[[googletest.skipped.suites.cases]]
name = "LeakedMockWithExpectCallCausesFailureWhenLeakCheckingIsEnabled"
line = "58"
[[googletest.skipped.suites.cases]]
name = "LeakedMockWithOnCallCausesFailureWhenLeakCheckingIsEnabled"
line = "71"
[[googletest.skipped.suites.cases]]
name = "CatchesMultipleLeakedMockObjects"
line = "83"
